!function(a){NModal=function(b){var c;try{c=window.localStorage}catch(a){c=!1}this._options=a.extend({name:"",title:"Hello world",content:"Hi there, this is a test content",ok:"ok",no_more:"Stop showing this",close:"Close",top:"20px",bottom:"initial",max_width:"320px",duration:"500ms",delay:0,sound:!1,force:!1,storage:c,template:'<div class="popover notiModal" role="tooltip"> <div class="arrow"></div> <h3 class="popover-title">{{title}}</h3> <div class="popover-content">{{content}}</div> <div class="popover-navigation"> <button class="btn btn-sm btn-default" data-role="ok">{{ok}}</button> <button class="btn btn-sm btn-default" data-role="no_more">{{no_more}}r</button> <button class="btn btn-sm btn-default" data-role="close">{{close}}</button> </div> </div>',onOkClick:function(a){}},b),this.shift_right="-"+(parseFloat(this._options.max_width)+20)+"px",this.init()},NModal.prototype.addStyle=function(){this.modal.css({display:"block","max-width":this.cssMeasureUnit(this._options.max_width),right:this.shift_right,top:"initial"!==this._options.bottom?"initial":this.cssMeasureUnit(this._options.top),bottom:this.cssMeasureUnit(this._options.bottom),left:"auto",position:"fixed","-webkit-transition":"all "+this._options.duration+" ease-out","-moz-transition":"all "+this._options.duration+" ease-out","-o-transition":"all "+this._options.duration+" ease-out",transition:"all "+this._options.duration+" ease-out","border-bottom-right-radius":"0","border-top-right-radius":"0"}),this.modal.find(".popover-navigation").css({"margin-bottom":"9px","margin-left":"14px","padding-right":"25px"})},NModal.prototype.replaceTemplate=function(){this.modal.find("h3.popover-title").html(this._options.title),this.modal.find(".popover-content").html(this._options.content),this.modal.find('button[data-role="ok"]').html(this._options.ok),this.modal.find('button[data-role="no_more"]').html(this._options.no_more),this.modal.find('button[data-role="close"]').html(this._options.close),this.modal.addClass(this._options.name)},NModal.prototype.cssMeasureUnit=function(a){return isNaN(a)?a:parseFloat(a)+"px"},NModal.prototype.init=function(){this.modal=a(this._options.template),this.addStyle(),this.replaceTemplate(),this.attachEvents(),a("body").append(this.modal)},NModal.prototype.attachEvents=function(){var a=this;this.modal.find('button[data-role="ok"]').click(function(){a._options.onOkClick(a)}),this.modal.find('button[data-role="close"]').click(function(){a.hide()}),this.modal.find('button[data-role="no_more"]').click(function(){a.setState("never_show_"+a._options.name,!0),a.hide()})},NModal.prototype.setState=function(a,b){if(this._options.storage){keyName=""+this._options.name+"_"+a;try{this._options.storage.setItem(a,b)}catch(a){e=a,e.code===DOMException.QUOTA_EXCEEDED_ERR&&this._debug("LocalStorage quota exceeded. State storage failed.")}}},NModal.prototype.getState=function(a){var b=!1;return this._options.storage&&(b=this._options.storage.getItem(a)),b},NModal.prototype.show=function(b){var c=this;is_never_show_again=this.getState("never_show_"+this._options.name);var e=a.extend({},a.notiModal.config,this._options,b);is_never_show_again&&!e.force||setTimeout(function(){if(c.modal.css("right",-5),e.sound){var a=new Audio("sound/notify.mp3");a.play()}},this._options.delay)},NModal.prototype.hide=function(){this.modal.css("right",this.shift_right)},NotiModal=function(){this.noti_modals={}},NotiModal.prototype.init=function(a,b){return a in this.noti_modals?void console.error("modal name : "+a+" already taken"):(b.name=a,this.noti_modals[a]=new NModal(b),this.noti_modals[a])},NotiModal.prototype.get=function(a){return a in this.noti_modals?this.noti_modals[a]:void console.error("no such modal name : "+a)},NotiModal.prototype.config={sound:!1,force:!1},a.notiModal=new NotiModal}(window.jQuery);
